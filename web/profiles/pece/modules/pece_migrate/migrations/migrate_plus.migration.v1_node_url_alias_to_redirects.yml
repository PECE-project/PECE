id: v1_node_url_alias_to_redirects
class: Drupal\migrate\Plugin\Migration
migration_tags:
  - 'Drupal 7'
  - 'PECE v1'
label: 'URL aliases to Redirects'
migration_group: pece

source:
  plugin: v1_node_url_alias
  bundle:
    - pece_analytic
    - pece_annotation
    - pece_artifact_audio
    - pece_artifact_bundle
    - pece_artifact_fieldnote
    - pece_artifact_image
    - pece_artifact_pdf
    - pece_artifact_tabularc
    - pece_artifact_text
    - pece_artifact_video
    - pece_artifact_website
    - pece_fieldsite
    - pece_memo
    - pece_project
    - pece_sub_logic
  constants:
    uri_prefix: 'internal:/'
    status_code: 301

process:
  uid:
    plugin: default_value
    default_value: 0
  type:
    plugin: default_value
    default_value: redirect
  redirect_source/path: alias
  redirect_redirect/uri:
    plugin: concat
    source:
      - constants/uri_prefix
      - source
  language:
    plugin: default_value
    source: language
    default_value: und
  status_code: constants/status_code

destination:
  plugin: 'entity:redirect'

migration_dependencies:
  required:
    - v1_analytic
    - v1_annotation
    - v1_audio
    - v1_bundle
    - v1_fieldnote
    - v1_image
    - v1_pdf
    - v1_tabular_data
    - v1_text
    - v1_video
    - v1_website
    - v1_fieldsite
    - v1_group
    - v1_memo
    - v1_project
    - v1_sub_logic
