id: v1_node_url_alias_to_redirects
class: Drupal\migrate\Plugin\Migration
migration_tags:
  - 'Drupal 7'
  - 'PECE v1'
label: 'URL aliases to Redirects'
migration_group: pece

source:
  plugin: v1_node_url_alias
  bundle:
    - pece_project
# Don't put group here, only items in type tray categories
  constants:
    uri_prefix: 'internal:/'
    status_code: 301

process:
  uid:
    plugin: default_value
    default_value: 0
  type:
    plugin: default_value
    default_value: redirect
  redirect_source/path: alias
  redirect_redirect/uri:
    plugin: concat
    source:
      - constants/uri_prefix
      - source
  language:
    plugin: default_value
    source: language
    default_value: und
  status_code: constants/status_code

destination:
  plugin: 'entity:redirect'

migration_dependencies:
  required: {  }
  optional: {  }
