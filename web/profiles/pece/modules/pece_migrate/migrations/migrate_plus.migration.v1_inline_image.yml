id: v1_inline_image
class: Drupal\migrate\Plugin\Migration
migration_tags:
  - 'Drupal 7'
  - Content
  - media
  - 'PECE v1'
migration_group: pece
label: 'Media (Inline image)'
source:
  constants:
    source_base_path: null
  plugin: v1_file_media
  file_type: image
  inline_media: TRUE
process:
  name: filename
  status: status
  created: timestamp
  changed: timestamp

  field_private_media_image/alt: filename
  field_private_media_image/target_id:
    - plugin: migration_lookup
      source: fid
      migration:
        - v1_file
        - v1_file_private
        - v1_file_essay
        - v1_file_private_essay
      no_stub: true
    - plugin: skip_on_empty
      method: row
      message: 'The file was not found.'

  uid:
    - plugin: migration_lookup
      source: uid
      migration: v1_user
      no_stub: true
    - plugin: default_value
      default_value: 1

  langcode:
    plugin: default_value
    default_value: en

destination:
  plugin: 'entity:media'
  default_bundle: inline_image
migration_dependencies:
  required: {  }
  optional:
    - v1_file
    - v1_file_private
    - v1_file_essay
    - v1_file_private_essay
    - v1_user
